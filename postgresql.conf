# PostgreSQL Configuration for Ticketing System
# This file overrides the default PostgreSQL settings

# Connection Settings
listen_addresses = '*'                  # Listen on all interfaces (required for Docker)
max_connections = 500                   # Increased from default 100
shared_buffers = 256MB                  # Recommended: 25% of RAM for dedicated DB
effective_cache_size = 1GB              # Estimated memory for caching
work_mem = 4MB                          # Memory for sorting/hash operations
maintenance_work_mem = 64MB             # Memory for maintenance operations

# Write-Ahead Logging (WAL)
wal_buffers = 16MB
checkpoint_completion_target = 0.9

# Query Planning
random_page_cost = 1.1                  # SSD-optimized value (default: 4.0)

# Logging
log_destination = 'stderr'
logging_collector = on
log_line_prefix = '%t [%p]: [%l-1] user=%u,db=%d,app=%a,client=%h '
log_statement = 'all'                   # Log all SQL statements for development
log_min_duration_statement = 100        # Log queries taking more than 100ms

# Error Handling
restart_after_crash = on
